{"version":3,"file":"modal.js","sources":["../../../js/src/modal.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.3.0-alpha1): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, isRTL, isVisible, reflow } from './util/index.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport ScrollBarHelper from './util/scrollbar.js'\nimport BaseComponent from './base-component.js'\nimport Backdrop from './util/backdrop.js'\nimport FocusTrap from './util/focustrap.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'modal'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst OPEN_SELECTOR = '.modal.show'\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]'\n\nconst Default = {\n  backdrop: true,\n  focus: true,\n  keyboard: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  focus: 'boolean',\n  keyboard: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._isTransitioning = false\n    this._scrollBar = new ScrollBarHelper()\n\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._isTransitioning = true\n\n    this._scrollBar.hide()\n\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._adjustDialog()\n\n    this._backdrop.show(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    this._isTransitioning = true\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    this._queueCallback(() => this._hideModal(), this._element, this._isAnimated())\n  }\n\n  dispose() {\n    for (const htmlElement of [window, this._dialog]) {\n      EventHandler.off(htmlElement, EVENT_KEY)\n    }\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n    super.dispose()\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value,\n      isAnimated: this._isAnimated()\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _showElement(relatedTarget) {\n    // try to append dynamic modal\n    if (!document.body.contains(this._element)) {\n      document.body.append(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.scrollTop = 0\n\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog)\n    if (modalBody) {\n      modalBody.scrollTop = 0\n    }\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialog, this._isAnimated())\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (this._config.keyboard) {\n        event.preventDefault()\n        this.hide()\n        return\n      }\n\n      this._triggerBackdropTransition()\n    })\n\n    EventHandler.on(window, EVENT_RESIZE, () => {\n      if (this._isShown && !this._isTransitioning) {\n        this._adjustDialog()\n      }\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n      // a bad trick to segregate clicks that may start inside dialog but end outside, and avoid listen to scrollbar clicks\n      EventHandler.one(this._element, EVENT_CLICK_DISMISS, event2 => {\n        if (this._element !== event.target || this._element !== event2.target) {\n          return\n        }\n\n        if (this._config.backdrop === 'static') {\n          this._triggerBackdropTransition()\n          return\n        }\n\n        if (this._config.backdrop) {\n          this.hide()\n        }\n      })\n    })\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._scrollBar.reset()\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const initialOverflowY = this._element.style.overflowY\n    // return if the following background transition hasn't yet completed\n    if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isModalOverflowing) {\n      this._element.style.overflowY = 'hidden'\n    }\n\n    this._element.classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      this._element.classList.remove(CLASS_NAME_STATIC)\n      this._queueCallback(() => {\n        this._element.style.overflowY = initialOverflowY\n      }, this._dialog)\n    }, this._dialog)\n\n    this._element.focus()\n  }\n\n  /**\n   * The following methods are used to handle overflowing modals\n   */\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const scrollbarWidth = this._scrollBar.getWidth()\n    const isBodyOverflowing = scrollbarWidth > 0\n\n    if (isBodyOverflowing && !isModalOverflowing) {\n      const property = isRTL() ? 'paddingLeft' : 'paddingRight'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n\n    if (!isBodyOverflowing && isModalOverflowing) {\n      const property = isRTL() ? 'paddingRight' : 'paddingLeft'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking modal toggler while another one is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen) {\n    Modal.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Modal.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Modal)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Modal)\n\nexport default Modal\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ESCAPE_KEY","EVENT_HIDE","EVENT_HIDE_PREVENTED","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_OPEN","CLASS_NAME_FADE","CLASS_NAME_SHOW","CLASS_NAME_STATIC","OPEN_SELECTOR","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE","Default","backdrop","focus","keyboard","DefaultType","Modal","BaseComponent","constructor","element","config","_dialog","SelectorEngine","findOne","_element","_backdrop","_initializeBackDrop","_focustrap","_initializeFocusTrap","_isShown","_isTransitioning","_scrollBar","ScrollBarHelper","_addEventListeners","toggle","relatedTarget","hide","show","showEvent","EventHandler","trigger","defaultPrevented","document","body","classList","add","_adjustDialog","_showElement","hideEvent","deactivate","remove","_queueCallback","_hideModal","_isAnimated","dispose","htmlElement","window","off","handleUpdate","Backdrop","isVisible","Boolean","_config","isAnimated","FocusTrap","trapElement","contains","append","style","display","removeAttribute","setAttribute","scrollTop","modalBody","reflow","transitionComplete","activate","on","event","key","preventDefault","_triggerBackdropTransition","one","event2","target","_resetAdjustments","reset","isModalOverflowing","scrollHeight","documentElement","clientHeight","initialOverflowY","overflowY","scrollbarWidth","getWidth","isBodyOverflowing","property","isRTL","paddingLeft","paddingRight","jQueryInterface","each","data","getOrCreateInstance","TypeError","getElementFromSelector","includes","tagName","alreadyOpen","getInstance","enableDismissTrigger","defineJQueryPlugin"],"mappings":"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"}